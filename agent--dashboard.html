<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Agent</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  background: #ededed;
  font-family: Arial, sans-serif;
}

.container {
  max-width: 820px;
  margin: auto;
  padding: 20px;
}

.form-box {
  background: #ffffff;
  padding: 20px;
  border-radius: 6px;
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 12px;
}

.form-box input,
.form-box select {
  padding: 12px;
  font-size: 15px;
}

.form-box button {
  grid-column: span 2;
  padding: 14px;
  font-weight: bold;
  background: #000;
  color: #fff;
  border: none;
  cursor: pointer;
}

.actions {
  margin-top: 12px;
  display: flex;
  gap: 10px;
}

.actions button {
  flex: 1;
  padding: 12px;
  border: 1px solid #ccc;
  background: #fff;
  font-weight: bold;
}

.list {
  margin-top: 20px;
}

.item {
  background: #fff;
  padding: 14px;
  border-radius: 6px;
  margin-bottom: 10px;
  font-size: 14px;
}

.expired {
  color: #b00000;
  font-weight: bold;
}
</style>
</head>

<body>
<div class="container">

  <!-- NEW FORM (VISUALLY DIFFERENT) -->
  <div class="form-box">
    <input id="address" placeholder="Property Address">
    <select id="state"></select>

    <input type="date" id="date">
    <select id="time"></select>

    <select id="timezone">
      <option>ET</option>
      <option>CT</option>
      <option>MT</option>
      <option>PT</option>
    </select>

    <button onclick="add()">Submit</button>
  </div>

  <div class="actions">
    <button onclick="render()">Refresh</button>
    <button onclick="clearExpired()">Delete Expired</button>
  </div>

  <div id="list" class="list"></div>

</div>

<script>
const STATES = [
  "AL","AK","AZ","AR","CA","CO","CT","DE","FL","GA",
  "HI","ID","IL","IN","IA","KS","KY","LA","ME","MD",
  "MA","MI","MN","MS","MO","MT","NE","NV","NH","NJ",
  "NM","NY","NC","ND","OH","OK","OR","PA","RI","SC",
  "SD","TN","TX","UT","VT","VA","WA","WV","WI","WY"
];

state.innerHTML = STATES.map(s => `<option>${s}</option>`).join("");

for (let h = 8; h <= 18; h++) {
  ["00","30"].forEach(m => {
    const ap = h >= 12 ? "PM" : "AM";
    const dh = h > 12 ? h - 12 : h;
    time.innerHTML += `<option>${dh}:${m} ${ap}</option>`;
  });
}

function get() {
  return JSON.parse(localStorage.getItem("reqs")) || [];
}

function set(r) {
  localStorage.setItem("reqs", JSON.stringify(r));
}

function add() {
  const r = get();
  r.push({
    a: address.value,
    s: state.value,
    d: date.value,
    t: time.value,
    z: timezone.value
  });
  set(r);
  render();
}

function render() {
  const r = get();
  list.innerHTML = "";

  if (!r.length) return;

  r.forEach(x => {
    const expired = new Date(`${x.d} ${x.t}`) < new Date();
    list.innerHTML += `
      <div class="item ${expired ? "expired" : ""}">
        ${x.a}<br>
        ${x.s} · ${x.d} · ${x.t} · ${x.z}
        ${expired ? "<div>EXPIRED</div>" : ""}
      </div>
    `;
  });
}

function clearExpired() {
  const r = get().filter(x =>
    new Date(`${x.d} ${x.t}`) >= new Date()
  );
  set(r);
  render();
}

render();
</script>
</body>
</html>
