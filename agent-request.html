<script>
  const timeSelect = document.getElementById("time");

  // Build start times: 8:00 AM â€“ 8:00 PM, 30-minute increments
  function buildTimes() {
    const times = [];
    let hour = 8;
    let isPM = false;

    while (!(hour === 9 && isPM)) {
      ["00", "30"].forEach(min => {
        const displayHour = hour === 12 ? 12 : hour;
        const label = `${displayHour}:${min} ${isPM ? "PM" : "AM"}`;
        times.push(label);
      });

      hour++;
      if (hour === 12) isPM = true;
      if (hour === 13) hour = 1;
    }

    times.forEach(t => {
      const opt = document.createElement("option");
      opt.value = t;
      opt.textContent = t;
      timeSelect.appendChild(opt);
    });
  }

  buildTimes();

  function resetForm() {
    document.getElementById("requestForm").reset();
  }

  document.getElementById("requestForm").addEventListener("submit", function(e) {
    e.preventDefault();

    const request = {
      agentName: agentName.value,
      address: address.value,
      city: city.value,
      state: state.value,
      timezone: timezone.value,
      date: date.value,
      time: time.value,
      duration: duration.value
    };

    localStorage.setItem("rg_pending_request", JSON.stringify(request));
    localStorage.setItem("rg_assignment_status", "pending");

    window.location.href = "agent-dashboard.html";
  });
</script>
